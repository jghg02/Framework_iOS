<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Framework ios by jghg02</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Framework ios</h1>
        <h2>How to create a Framework in iOS.</h2>

        <section id="downloads">
          <a href="https://github.com/jghg02/Framework_iOS/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/jghg02/Framework_iOS/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/jghg02/Framework_iOS" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="documentaci%C3%B3n" class="anchor" href="#documentaci%C3%B3n"><span class="octicon octicon-link"></span></a>Documentación.</h1>

<h2>
<a name="creando-un-framework-en-ios" class="anchor" href="#creando-un-framework-en-ios"><span class="octicon octicon-link"></span></a>Creando un Framework en <em>iOS</em>.</h2>

<p>Lo primero que debemos crear es una <em>Libreria Estatica</em>, para esto vamos a <strong>File</strong> &gt; <strong>New Project</strong> en esta parte seleccionamos <strong>iOS</strong> y dentro de esta sección seleccionamos <strong>Cocoa Touch Static Library</strong></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework1.png" alt=""></p>

<p>Luego le damos <em>next</em> y colocamos el <strong>nombre</strong> que va a tener nuestra libreria.</p>

<p>Salvamos nuestro proyecto y seleccionamos el direcctorio donde lo guardaremos. </p>

<p>Una vez creado, debemos ver algo como esto.
<img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework3.png" alt=""></p>

<p>Dentro de <strong>Xcode</strong> seleccionamos el <em>Target</em> de la libreria que hemos creado y nos vamos a <em>Build Phase</em> y agregamos los <strong>Headers</strong> (Los cuales seran usados por la app donde importaremos nuestra libreria)</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework4.png" alt=""></p>

<p>Para agregar los <strong>Headers</strong> vamos al <em>Menu Editor</em> &gt; <em>Add Build Phase</em> &gt; <em>Add Headers Build Phase</em></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework5.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework6.png" alt=""></p>

<p>En los <strong>Headers</strong> solo importaremos los archivos con extension <em>.h</em> (estos deben ser colocados en <strong>Public</strong>)</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework21.png" alt=""></p>

<p>Luego de agregar los <em>Headers</em> es necesario agregar el <strong>script</strong> para de esta forma cada vez que hagamos el <strong>build</strong> de la libreria genere queleto de nuestro framework. </p>

<p>Para esto vamos al <em>Menu Editor</em> &gt; <em>Add Build Phase</em> &gt; <em>Add Run Script Build Phase</em> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework7.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework8.png" alt=""></p>

<h3>
<a name="script" class="anchor" href="#script"><span class="octicon octicon-link"></span></a>Script</h3>

<pre><code>set -e

mkdir -p "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers"

 # Link the "Current" version to "A"
 /bin/ln -sfh A "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/Current"
/bin/ln -sfh Versions/Current/Headers "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Headers"
/bin/ln -sfh "Versions/Current/${PRODUCT_NAME}" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/${PRODUCT_NAME}"

# The -a ensures that the headers maintain the source modification date so that we don't constantly
# cause propagating rebuilds of files that import these headers.
/bin/cp -a "${TARGET_BUILD_DIR}/${PUBLIC_HEADERS_FOLDER_PATH}/" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers"
</code></pre>

<h3>
<a name="creando-el-framework-distribution-target" class="anchor" href="#creando-el-framework-distribution-target"><span class="octicon octicon-link"></span></a>Creando el Framework Distribution Target.</h3>

<p>Para esto vamos al Menu <strong>File</strong> &gt; <strong>Target</strong> &gt; <strong>iOS</strong> &gt; <strong>Other</strong>  and <strong>create a new agregate</strong></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework9.png" alt=""></p>

<p>Seleccionamos <strong>Target</strong></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework10.png" alt=""></p>

<p>Y colocamos el nombre del <em>Target</em> y seleccionamos el proyecto con el cual lo vamos a asociar.</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework11.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework12.png" alt=""></p>

<p>Luego agregamos en el <strong>Build Phase</strong> el <em>script</em>. Para esto vamos al menu <strong>Editor</strong> &gt; <strong>Add Build Phase</strong> &gt; <strong>Add Run Script Build Phase</strong> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework13.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework14.png" alt=""></p>

<h3>
<a name="script-1" class="anchor" href="#script-1"><span class="octicon octicon-link"></span></a>Script</h3>

<pre><code>set -e
set +u
# Avoid recursively calling this script.
if [[ $SF_MASTER_SCRIPT_RUNNING ]]
then
 exit 0
fi
set -u
export SF_MASTER_SCRIPT_RUNNING=1

SF_TARGET_NAME=${PROJECT_NAME}
SF_EXECUTABLE_PATH="lib${SF_TARGET_NAME}.a"
SF_WRAPPER_NAME="${SF_TARGET_NAME}.framework"

# The following conditionals come from
# https://github.com/kstenerud/iOS-Universal-Framework

 if [[ "$SDK_NAME" =~ ([A-Za-z]+) ]]
 then
    SF_SDK_PLATFORM=${BASH_REMATCH[1]}
 else
    echo "Could not find platform name from SDK_NAME: $SDK_NAME"
    exit 1
fi

if [[ "$SDK_NAME" =~ ([0-9]+.*$) ]]
then
   SF_SDK_VERSION=${BASH_REMATCH[1]}
else
  echo "Could not find sdk version from SDK_NAME: $SDK_NAME"
  exit 1
fi

if [[ "$SF_SDK_PLATFORM" = "iphoneos" ]]
then
   SF_OTHER_PLATFORM=iphonesimulator
else
   SF_OTHER_PLATFORM=iphoneos
fi

if [[ "$BUILT_PRODUCTS_DIR" =~ (.*)$SF_SDK_PLATFORM$ ]]
then
   SF_OTHER_BUILT_PRODUCTS_DIR="${BASH_REMATCH[1]}${SF_OTHER_PLATFORM}"
else
   echo "Could not find platform name from build products directory:        $BUILT_PRODUCTS_DIR"
   exit 1
fi

# Build the other platform.
xcrun xcodebuild -project "${PROJECT_FILE_PATH}" -target "${TARGET_NAME}" -configuration "${CONFIGURATION}" -sdk ${SF_OTHER_PLATFORM}${SF_SDK_VERSION} BUILD_DIR="${BUILD_DIR}" OBJROOT="${OBJROOT}" BUILD_ROOT="${BUILD_ROOT}" SYMROOT="${SYMROOT}" $ACTION

 # Smash the two static libraries into one fat binary and store it in the .framework
 xcrun lipo -create "${BUILT_PRODUCTS_DIR}/${SF_EXECUTABLE_PATH}" "${SF_OTHER_BUILT_PRODUCTS_DIR}/${SF_EXECUTABLE_PATH}" -output "${BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}"

 # Copy the binary to the other architecture folder to have a complete framework in both.
 cp -a "${BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}" "${SF_OTHER_BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}"
</code></pre>

<p>Seleccionado el <em>Target</em> que hemos creado en la sección de <strong>Build Phase</strong> -&gt; <strong>Target Dependencies</strong> y agregamos la libreria que creamos.</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework15.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework16.png" alt=""></p>

<p>Luego creamos el <strong>Target</strong> para esto vamos al menu <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Target</strong> &gt; <strong>OS X</strong> &gt; <strong>Bundle</strong> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework17.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework18.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework19.png" alt=""></p>

<p>Procedemos a cambiar el <strong>Base SDK</strong> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Framework20.png" alt=""></p>

<p>Por ultimo creamos el <em>Build</em> de la <strong>Libreria</strong> y el <strong>Target</strong> </p>

<h3>
<a name="project-app" class="anchor" href="#project-app"><span class="octicon octicon-link"></span></a>Project App.</h3>

<p>Procedemos a crear un nuevo proyecto <strong>iOS</strong> &gt; <strong>Application</strong> &gt; <strong>Single View App</strong> Colocamos el nombre y un directorio donde se almacenara el nuevo proyecto.</p>

<p>Para poder integrar nuestra nueva app y el <em>framewrok</em> que hemos creado, es necesario crear un <strong>WorkSpace</strong> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work1.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work2.png" alt=""></p>

<p>Vamos al directorio donde creamos los proyectos y los arrastramos al <strong>WorkSpace</strong> tanto la libreria como nuestra app que hemos creado.</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work3.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work4.png" alt=""></p>

<p>En nuestro proyecto (<strong>TestApp</strong>) creamos una carpeta llamada <em>Libraries</em> y arrastramos la libreria <strong>Testing</strong> (que creamos).</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work5.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work6.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work7.png" alt=""></p>

<p>Compilamos el <strong>Target</strong> </p>

<p>Procedemos a agregar la libreria a nuestro proyecto. Para esto vamos al <strong>Target</strong> de nuestra app y en la seccion de <strong>Build Phase</strong> &gt; <strong>Target Dependencies</strong> y agregamos el <em>Bundle</em> y el <em>Target</em> que hemos creado anteriormente. </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work8.png" alt=""></p>

<p>Por ultimo creamos una carpeta llamada <strong>framework</strong> y copiamos los archivos <strong>.framework</strong> y <strong>.bundle</strong> los cuales son generadmos al momento de compilar nuestra libreria. </p>

<p>Para esto vamos a la carpeta <strong>Products</strong> de la libreria que hemos creado y damos click derecho cobre y ella y seleccionamos <strong>Show in Finder</strong> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work9.png" alt=""></p>

<p>Y se vera algo como esto.</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work10.png" alt=""></p>

<p>Luego a la carpeta <em>framework</em> que creamos arrastramos el archivo con extension <strong>.bundle</strong> y <strong>.framework</strong> </p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work11.png" alt=""></p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work12.png" alt=""></p>

<p>Ya con esto podemos realizar el <em>import</em> en nuestro proyecto.</p>

<p><img src="https://raw.githubusercontent.com/jghg02/Framework_iOS/master/img/Work13.png" alt=""></p>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-55770028-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>